(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-19d5fd28"],{"0165":function(e,t,i){"use strict";i("cee7")},"0dc2":function(e,t,i){"use strict";i.r(t);i("ddb0");var o=i("7a23");const c=e=>(Object(o["pushScopeId"])("data-v-72821d6b"),e=e(),Object(o["popScopeId"])(),e),n={class:"header"},s=c(()=>Object(o["createElementVNode"])("div",{class:"title"},[Object(o["createElementVNode"])("span",{class:"icon"}),Object(o["createTextVNode"])(" Notes ")],-1)),a={key:1,class:"notes"},l={class:"header-ations"},r={key:0,class:"new-note"},d={class:"actions"},b={class:"visibility radios"},m=c(()=>Object(o["createElementVNode"])("label",{class:"label"},"Visibility:",-1)),u=["value","id"],O=["for","title"],j={key:1,class:"empty"};function p(e,t){const i=Object(o["resolveComponent"])("Loader"),c=Object(o["resolveComponent"])("Button"),p=Object(o["resolveComponent"])("MarkdownEditor"),h=Object(o["resolveComponent"])("Note"),k=Object(o["resolveComponent"])("Modal");return Object(o["openBlock"])(),Object(o["createBlock"])(k,{class:"right-side"},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",n,[s,Object(o["createElementVNode"])("div",{onClick:t[0]||(t[0]=(...t)=>e.close&&e.close(...t)),class:"icon close"})]),e.isLoading?(Object(o["openBlock"])(),Object(o["createBlock"])(i,{key:0,color:"white"})):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",a,[Object(o["createElementVNode"])("div",l,[Object(o["createVNode"])(c,{class:"outline-white",size:"medium",text:"New note",onClick:e.onNew,"is-disabled":e.isNew},null,8,["onClick","is-disabled"])]),e.isNew?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",r,[Object(o["createVNode"])(p,{ref:"note",modelValue:e.note,"onUpdate:modelValue":t[2]||(t[2]=t=>e.note=t),placeholder:"New note...","assignable-users":[],"hide-github-gidelines":"",class:"body",onSubmit:e.submit},{actions:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",d,[Object(o["createElementVNode"])("div",b,[m,(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.visibility,(i,c)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:"radio",key:c},[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.isPrivate=t),type:"radio",value:i.value,id:c},null,8,u),[[o["vModelRadio"],e.isPrivate]]),Object(o["createElementVNode"])("label",{for:c,title:i.title},Object(o["toDisplayString"])(i.label),9,O)]))),128))])]),Object(o["createVNode"])(c,{text:"Cancel",type:"outline",onClick:e.cancel,"is-disabled":e.isSubmitting},null,8,["onClick","is-disabled"]),Object(o["createVNode"])(c,{text:"Submit new note",onClick:e.submit,"is-loading":e.isSubmitting,class:"submit"},null,8,["onClick","is-loading"])]),_:1},8,["modelValue","onSubmit"])])):Object(o["createCommentVNode"])("",!0),e.isEmpty?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",j," There are no notes for this board. Be the first! :) ")):Object(o["createCommentVNode"])("",!0),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.items,e=>(Object(o["openBlock"])(),Object(o["createBlock"])(h,Object(o["mergeProps"])({key:e.id},e),null,16))),128))]))]),_:1})}var h=i("fb08"),k=i("a609"),v=i("8e36"),N=i("0f9c"),g=i("aff5");const y=e=>(Object(o["pushScopeId"])("data-v-6a694127"),e=e(),Object(o["popScopeId"])(),e),w={class:"note-wrapper"},E={key:1,class:"note"},V={class:"header"},B=["href"],S=["title"],C=["innerHTML"],f={key:2,class:"edit-note"},I={class:"actions"},P={key:0,class:"visibility radios"},x=y(()=>Object(o["createElementVNode"])("label",{class:"label"},"Visibility:",-1)),L=["value","id"],M=["for","title"];function D(e,t){const i=Object(o["resolveComponent"])("ButtonIcon"),c=Object(o["resolveComponent"])("Select"),n=Object(o["resolveComponent"])("Button"),s=Object(o["resolveComponent"])("MarkdownEditor");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",w,[e.isSettingsOpen?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:0,class:"select-overlay",onClick:t[0]||(t[0]=Object(o["withModifiers"])((...t)=>e.closeSettings&&e.closeSettings(...t),["self"]))})):Object(o["createCommentVNode"])("",!0),e.isEdit?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",E,[Object(o["createElementVNode"])("div",V,[Object(o["createElementVNode"])("span",{class:Object(o["normalizeClass"])(["note-icon",{private:e.isPrivate}])},null,2),Object(o["createElementVNode"])("a",{class:"author",href:e.author.url},Object(o["toDisplayString"])(e.author.login),9,B),Object(o["createElementVNode"])("span",{class:"ago",title:e.createdAt}," created this note "+Object(o["toDisplayString"])(e.createdAgo),9,S)]),Object(o["createVNode"])(i,{name:"dots",onClick:e.openSettings},null,8,["onClick"]),e.isSettingsOpen?(Object(o["openBlock"])(),Object(o["createBlock"])(c,{key:0,class:"select-settings"},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",{class:"item",onClick:t[1]||(t[1]=(...t)=>e.editNote&&e.editNote(...t))},"Edit"),e.isOwner?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:0,class:"item danger",onClick:t[2]||(t[2]=(...t)=>e.deleteNote&&e.deleteNote(...t))},"Delete")):Object(o["createCommentVNode"])("",!0)]),_:1})):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("div",{class:"body markdown-body",innerHTML:e.markdown(e.body)},null,8,C)])),e.isEdit?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",f,[Object(o["createVNode"])(s,{ref:"noteEditor",modelValue:e.newNote,"onUpdate:modelValue":t[4]||(t[4]=t=>e.newNote=t),"assignable-users":[],onSubmit:e.update,"hide-github-gidelines":""},{actions:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",I,[e.isOwner?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",P,[x,(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.visibility,(i,c)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:"radio",key:c},[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.newIsPrivate=t),type:"radio",value:i.value,id:c},null,8,L),[[o["vModelRadio"],e.newIsPrivate]]),Object(o["createElementVNode"])("label",{for:c,title:i.title},Object(o["toDisplayString"])(i.label),9,M)]))),128))])):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])(n,{type:"outline",text:"Cancel",onClick:e.cancel},null,8,["onClick"]),Object(o["createVNode"])(n,{type:"indigo",text:"Update note",isLoading:e.isSubmitting,onClick:e.update},null,8,["isLoading","onClick"])]),_:1},8,["modelValue","onSubmit"])])):Object(o["createCommentVNode"])("",!0)])}var $=i("d669"),_=i("9773"),q=i("7ffd"),T={props:{id:{type:[String,Number],required:!0},body:{type:String,required:!0},createdAt:{type:String,required:!0},createdAgo:{type:String,required:!0},author:{type:Object,required:!0},isPrivate:{type:Boolean,required:!0}},components:{Button:h["a"],ButtonIcon:$["a"],MarkdownEditor:N["a"],Select:_["a"]},data:()=>({visibility:[{value:!0,label:"Private",title:"Private. Only you can see it"},{value:!1,label:"Members",title:"You and board members can see it"}],newNote:"",newIsPrivate:!0,isEdit:!1,isSettingsOpen:!1,isSubmitting:!1,isDeleting:!1}),computed:{username:Object(q["c"])("user/username"),isOwner(){return this.author.login===this.username}},methods:{...Object(q["a"])(["notes/updateNote","notes/destroyNote"]),openSettings(){this.isSettingsOpen=!0},closeSettings(){this.isSettingsOpen=!1},editNote(){this.isEdit=!0,this.newNote=this.body,this.newIsPrivate=this.isPrivate,this.closeSettings(),this.$nextTick(()=>this.$refs.noteEditor.$refs.textarea.focus())},async update(){""!=this.newComment&&(this.isSubmitting||(this.isSubmitting=!0,await this.updateNote({id:this.id,body:this.newNote,isPrivate:this.newIsPrivate}),this.isEdit=!1,this.isSubmitting=!1))},cancel(){this.isEdit=!1,this.newNote=this.body},async deleteNote(){this.isDeleting||confirm("Are you sure you want to delete this?")&&(this.isSettingsOpen=!1,this.isDeleting=!0,await this.destroyNote({id:this.id}))},markdown(e){return v["a"].render(e)}}};i("a52b");T.render=D,T.__scopeId="data-v-6a694127";var A=T,U={components:{Button:h["a"],Loader:k["a"],MarkdownEditor:N["a"],Modal:g["a"],Note:A},props:{},data:()=>({visibility:[{value:!0,label:"Private",title:"Private. Only you can see it"},{value:!1,label:"Members",title:"You and board members can see it"}],isNew:!1,isSubmitting:!1,note:"",isPrivate:!0}),computed:{isLoading:Object(q["c"])("notes/isLoading"),items:Object(q["c"])("notes/items"),boardId(){return parseInt(this.$route.params.id)},isEmpty(){return!this.isLoading&&0===this.items.length&&!this.isNew}},async mounted(){await this.fetch({boardId:this.boardId})},methods:{...Object(q["a"])(["notes/fetch","notes/createNote"]),onNew(){this.isNew=!0,this.$nextTick(()=>this.$refs.note.$refs.textarea.focus())},async submit(){this.isSubmitting||(this.isSubmitting=!0,await this.createNote({boardId:this.boardId,body:this.note,isPrivate:this.isPrivate}),this.isNew=!1,this.isSubmitting=!1,this.note="")},cancel(){this.isNew=!1},close(){this.$router.push({name:"board",id:this.boardId})},markdown(e){return v["a"].render(e)}}};i("0165");U.render=p,U.__scopeId="data-v-72821d6b";t["default"]=U},"8a44":function(e,t,i){},a52b:function(e,t,i){"use strict";i("8a44")},cee7:function(e,t,i){}}]);
//# sourceMappingURL=chunk-19d5fd28.03afe70a.js.map